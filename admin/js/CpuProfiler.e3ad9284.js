(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["CpuProfiler"],{"28a5":function(t,e,n){"use strict";var a=n("aae3"),r=n("cb7c"),i=n("ebd6"),o=n("0390"),s=n("9def"),c=n("5f1b"),l=n("520a"),u=n("79e5"),f=Math.min,d=[].push,h="split",p="length",v="lastIndex",g=4294967295,m=!u((function(){RegExp(g,"y")}));n("214f")("split",2,(function(t,e,n,u){var b;return b="c"=="abbc"[h](/(b)*/)[1]||4!="test"[h](/(?:)/,-1)[p]||2!="ab"[h](/(?:ab)*/)[p]||4!="."[h](/(.?)(.?)/)[p]||"."[h](/()()/)[p]>1||""[h](/.?/)[p]?function(t,e){var r=String(this);if(void 0===t&&0===e)return[];if(!a(t))return n.call(r,t,e);var i,o,s,c=[],u=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),f=0,h=void 0===e?g:e>>>0,m=new RegExp(t.source,u+"g");while(i=l.call(m,r)){if(o=m[v],o>f&&(c.push(r.slice(f,i.index)),i[p]>1&&i.index<r[p]&&d.apply(c,i.slice(1)),s=i[0][p],f=o,c[p]>=h))break;m[v]===i.index&&m[v]++}return f===r[p]?!s&&m.test("")||c.push(""):c.push(r.slice(f)),c[p]>h?c.slice(0,h):c}:"0"[h](void 0,0)[p]?function(t,e){return void 0===t&&0===e?[]:n.call(this,t,e)}:n,[function(n,a){var r=t(this),i=void 0==n?void 0:n[e];return void 0!==i?i.call(n,r,a):b.call(String(r),n,a)},function(t,e){var a=u(b,t,this,e,b!==n);if(a.done)return a.value;var l=r(t),d=String(this),h=i(l,RegExp),p=l.unicode,v=(l.ignoreCase?"i":"")+(l.multiline?"m":"")+(l.unicode?"u":"")+(m?"y":"g"),x=new h(m?l:"^(?:"+l.source+")",v),w=void 0===e?g:e>>>0;if(0===w)return[];if(0===d.length)return null===c(x,d)?[d]:[];var y=0,_=0,S=[];while(_<d.length){x.lastIndex=m?_:0;var k,z=c(x,m?d:d.slice(_));if(null===z||(k=f(s(x.lastIndex+(m?0:_)),d.length))===y)_=o(d,_,p);else{if(S.push(d.slice(y,_)),S.length===w)return S;for(var N=1;N<=z.length-1;N++)if(S.push(z[N]),S.length===w)return S;_=y=k}}return S.push(d.slice(y)),S}]}))},"2f21":function(t,e,n){"use strict";var a=n("79e5");t.exports=function(t,e){return!!t&&a((function(){e?t.call(null,(function(){}),1):t.call(null)}))}},"36bd":function(t,e,n){"use strict";var a=n("4bf8"),r=n("77f1"),i=n("9def");t.exports=function(t){var e=a(this),n=i(e.length),o=arguments.length,s=r(o>1?arguments[1]:void 0,n),c=o>2?arguments[2]:void 0,l=void 0===c?n:r(c,n);while(l>s)e[s++]=t;return e}},"386b":function(t,e,n){var a=n("5ca1"),r=n("79e5"),i=n("be13"),o=/"/g,s=function(t,e,n,a){var r=String(i(t)),s="<"+e;return""!==n&&(s+=" "+n+'="'+String(a).replace(o,"&quot;")+'"'),s+">"+r+"</"+e+">"};t.exports=function(t,e){var n={};n[t]=e(s),a(a.P+a.F*r((function(){var e=""[t]('"');return e!==e.toLowerCase()||e.split('"').length>3})),"String",n)}},"386d":function(t,e,n){"use strict";var a=n("cb7c"),r=n("83a1"),i=n("5f1b");n("214f")("search",1,(function(t,e,n,o){return[function(n){var a=t(this),r=void 0==n?void 0:n[e];return void 0!==r?r.call(n,a):new RegExp(n)[e](String(a))},function(t){var e=o(n,t,this);if(e.done)return e.value;var s=a(t),c=String(this),l=s.lastIndex;r(l,0)||(s.lastIndex=0);var u=i(s,c);return r(s.lastIndex,l)||(s.lastIndex=l),null===u?-1:u.index}]}))},"53c7":function(t,e,n){"use strict";(function(t){n("ac4d"),n("8a81"),n("5df3"),n("1c4c"),n("6b54"),n("2397"),n("96cf");var a=n("3b8d"),r=(n("4917"),n("c5f6"),n("ac6a"),n("7f7f"),n("d225")),i=n("b0b4"),o=n("4e2b"),s=n("308d"),c=n("6bb5"),l=n("9ab4"),u=n("60a3"),f=n("7d73"),d=n("26de");function h(t){if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(t=p(t))){var e=0,n=function(){};return{s:n,n:function(){return e>=t.length?{done:!0}:{done:!1,value:t[e++]}},e:function(t){throw t},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,r,i=!0,o=!1;return{s:function(){a=t[Symbol.iterator]()},n:function(){var t=a.next();return i=t.done,t},e:function(t){o=!0,r=t},f:function(){try{i||null==a.return||a.return()}finally{if(o)throw r}}}}function p(t,e){if(t){if("string"===typeof t)return v(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?v(t,e):void 0}}function v(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,a=new Array(e);n<e;n++)a[n]=t[n];return a}function g(t){return function(){var e,n=Object(c["a"])(t);if(m()){var a=Object(c["a"])(this).constructor;e=Reflect.construct(n,arguments,a)}else e=n.apply(this,arguments);return Object(s["a"])(this,e)}}function m(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var b=function(e){Object(o["a"])(s,e);var n=g(s);function s(){var t;return Object(r["a"])(this,s),t=n.apply(this,arguments),t.currpage=1,t.pagesize=5,t.nodeServices=[],t.showFlameGraph=!1,t.dialogTitle="",t.flamegraphData=null,t.websock=null,t.checkTime=10,t.buttonText="开始",t.buttonTime=0,t}return Object(i["a"])(s,[{key:"onShowFlameGraph",value:function(t){this.dialogTitle="".concat(t.base.node&&t.base.node.name," ").concat(t.base.addr,"-").concat(t.base.name),this.flamegraphData={fconfig:{fonttype:"Verdana",fontsize:12,imagewidth:"100%",frameheight:16,fontwidth:.59,minwidth:.1,countname:"samples",colors:"hot",bgcolor1:"#eeeeee",bgcolor2:"#eeeeb0",timemax:1/0,factor:1,hash:!0,titletext:"Flame Graph",nametype:"Function:",removenarrows:!0,profile:{shortStack:!0,unresolveds:!1,v8internals:!1,v8gc:!0,sysinternals:!1}},data:JSON.parse(t.result)},this.showFlameGraph=!0}},{key:"onSelectNodeServiceChange",value:function(t){var e=this;this.currpage=1,this.nodeServices=[],t.forEach((function(t){e.nodeServices.push({base:t,result:"",error:"",tempPrint:""})}))}},{key:"changePageIndex",value:function(t){this.currpage=t}},{key:"changePageSize",value:function(t){this.pagesize=t}},{key:"commitDebugCommand",value:function(){var e=this;this.websock&&this.websock.close(),this.buttonTime&&window.clearInterval(this.buttonTime);var n=Number(this.checkTime);this.buttonText=n+"s",this.buttonTime=window.setInterval((function(){n--,e.buttonText=n+"s",n<=0&&(window.clearInterval(e.buttonTime),e.buttonTime=null,e.buttonText="开始")}),1e3);var r=window.location.host,i=Object({NODE_ENV:"production",BASE_URL:"/admin/"}).VUE_APP_BASE_API||"/admin/";if(i){var o=i.match(/http:\/\/(.*)\//);r=o?o[1]:r}this.websock=new WebSocket("ws://"+r+"/api/cpu_profiler"),this.websock.onmessage=function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(n){var a,r,i,o,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,new Response(n.data).text();case 2:a=t.sent,r=JSON.parse(a),i=h(e.nodeServices);try{for(i.s();!(o=i.n()).done;)s=o.value,s.base.node&&r.node_id==s.base.node.id&&r.addr==s.base.addr&&("error"==r.type&&(s.error=r.msg),"print"==r.type&&(s.tempPrint+=r.msg.text,0==r.msg.index&&(s.result=s.tempPrint,s.tempPrint="")))}catch(c){i.e(c)}finally{i.f()}case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),this.websock.onopen=function(){var n=[];for(var a in e.nodeServices)e.nodeServices[a].result="",e.nodeServices[a].error="",n.push(e.nodeServices[a].base);var r=JSON.stringify({cmd:"run",time:Number(e.checkTime),targets:n});e.websock.send(t.from(r))},this.websock.onclose=function(){console.log("socket close")},this.websock.onerror=function(t){console.log("socket err: ".concat(t.message))}}}]),s}(u["c"]);b=Object(l["a"])([Object(u["a"])({name:"CpuProfiler",components:{NodeFilter:d["a"],flamegraph:f["a"]}})],b),e["a"]=b}).call(this,n("b639").Buffer)},"55dd":function(t,e,n){"use strict";var a=n("5ca1"),r=n("d8e8"),i=n("4bf8"),o=n("79e5"),s=[].sort,c=[1,2,3];a(a.P+a.F*(o((function(){c.sort(void 0)}))||!o((function(){c.sort(null)}))||!n("2f21")(s)),"Array",{sort:function(t){return void 0===t?s.call(i(this)):s.call(i(this),r(t))}})},"5ad2":function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"app-container"},[n("el-row",{staticStyle:{"padding-top":"15px","padding-bottom":"15px","border-bottom":"1px solid white"}},[n("NodeFilter",{ref:"nodeFilter",on:{selectNodeServiceChange:t.onSelectNodeServiceChange}})],1),n("el-row",{staticStyle:{"padding-top":"15px","padding-bottom":"15px","border-bottom":"1px solid white"}},[n("el-table",{staticStyle:{width:"100%"},attrs:{data:t.nodeServices.slice((t.currpage-1)*t.pagesize,t.currpage*t.pagesize),stripe:""}},[n("el-table-column",{attrs:{label:"类型",width:"100px"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n          "+t._s(e.row.base.node.type)+"\n        ")]}}])}),n("el-table-column",{attrs:{label:"节点",width:"100px"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n          "+t._s(e.row.base.node.name)+"\n        ")]}}])}),n("el-table-column",{attrs:{label:"地址",width:"100px"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n          "+t._s(e.row.base.node.addr)+"\n        ")]}}])}),n("el-table-column",{attrs:{label:"服务地址",width:"100px"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n          "+t._s(e.row.base.addr)+"\n        ")]}}])}),n("el-table-column",{attrs:{label:"服务名",width:"150px"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n          "+t._s(e.row.base.name)+"\n        ")]}}])}),n("el-table-column",{attrs:{label:"flamegraph",width:"150px"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{size:"normal",disabled:""==e.row.result},on:{click:function(n){return t.onShowFlameGraph(e.row)}}},[t._v(t._s("查看"))])]}}])}),n("el-table-column",{attrs:{label:"size",width:"50px"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n          "+t._s(e.row.result.length)+"\n        ")]}}])}),n("el-table-column",{attrs:{label:"error",width:"150px"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-input",{attrs:{placeholder:""},model:{value:e.row.error,callback:function(n){t.$set(e.row,"error",n)},expression:"scope.row.error"}})]}}],null,!1,889115576)})],1),n("div",{staticStyle:{"text-align":"center","margin-top":"30px"}},[n("el-pagination",{attrs:{background:"",layout:"prev, pager, next, sizes, total, jumper","page-sizes":[5,10,15,20],"page-size":t.pagesize,"current-page":t.currpage,total:t.nodeServices.length},on:{"update:pageSize":function(e){t.pagesize=e},"update:page-size":function(e){t.pagesize=e},"update:currentPage":function(e){t.currpage=e},"update:current-page":function(e){t.currpage=e},"current-change":t.changePageIndex,"size-change":t.changePageSize}})],1)],1),n("el-row",{staticStyle:{"padding-top":"15px","padding-bottom":"15px","border-bottom":"1px solid white"}},[n("el-input-number",{model:{value:t.checkTime,callback:function(e){t.checkTime=e},expression:"checkTime"}}),t._v("秒\n  ")],1),n("el-row",{staticStyle:{"padding-top":"15px","padding-bottom":"15px","border-bottom":"1px solid white"}},[n("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.commitDebugCommand()}}},[t._v(t._s(t.buttonText))])],1),n("el-dialog",{attrs:{visible:t.showFlameGraph,title:t.dialogTitle,height:"95%",width:"95%"},on:{"update:visible":function(e){t.showFlameGraph=e}}},[n("flamegraph",{ref:"flamegraph",attrs:{flamegraphData:t.flamegraphData}})],1)],1)},r=[],i=n("53c7"),o=i["a"],s=n("2877"),c=Object(s["a"])(o,a,r,!1,null,null,null);e["default"]=c.exports},"6c7b":function(t,e,n){var a=n("5ca1");a(a.P,"Array",{fill:n("36bd")}),n("9c6c")("fill")},"7d73":function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("svg",{ref:"svg",staticClass:"flamegraph-view",attrs:{version:"1.1",id:"flamegraph-svg","data-width":"100%",width:"100%",height:t.data.imageheight,"data-height":t.data.imageheight,xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"}},[n("defs",[n("linearGradient",{attrs:{id:"background",y1:"0",y2:"1",x1:"0",x2:"0"}},[n("stop",{attrs:{"stop-color":t.data.bgcolor1,offset:"5%"}}),n("stop",{attrs:{"stop-color":t.data.bgcolor2,offset:"95%"}})],1)],1),n("rect",{attrs:{x:"0.0",y:"0",id:"svg-background",width:"100%",height:t.data.imageheight,fill:"url(#background)"}}),n("text",{attrs:{"text-anchor":"left",x:t.data.xpad,y:t.data.detailsY,"font-size":t.data.fontsize,"font-family":t.data.fonttype,fill:"rgb(0,0,0)",id:"details"}},[t._v(t._s(t.show))]),n("text",{ref:"unzoom",staticStyle:{opacity:"0.0",cursor:"pointer"},attrs:{"text-anchor":"",x:t.data.xpad,y:"21","font-size":t.data.fontsize,"font-family":t.data.fonttype,fill:"rgb(0,0,0)"},on:{click:function(e){return e.stopPropagation(),t.unzoom()}}},[t._v("Reset Zoom")]),n("text",{ref:"enlarge",staticStyle:{opacity:"0.1",cursor:"pointer"},attrs:{"text-anchor":"",x:t.data.xpad3,y:"21","font-size":t.data.fontsize,"font-family":t.data.fonttype,fill:"rgb(0,0,0)"},on:{mouseover:function(e){return t.zoomover()},mouseout:function(e){return t.zoomout()},click:function(e){return e.stopPropagation(),t.set_parent_inf(e)}}},[t._v(t._s(t.enlarge))]),n("text",{ref:"search",staticStyle:{opacity:"0.1",cursor:"pointer"},attrs:{"text-anchor":"",x:t.data.xpad2,y:"21","font-size":t.data.fontsize,"font-family":t.data.fonttype,fill:"rgb(0,0,0)"},on:{mouseover:function(e){return t.searchover()},mouseout:function(e){return t.searchout()},click:function(e){return e.stopPropagation(),t.search_prompt()}}},[t._v("Search")]),n("text",{ref:"matched",attrs:{"text-anchor":"",x:t.data.xpad2,y:t.data.detailsY,"font-size":t.data.fontsize,"font-family":t.data.fonttype,fill:"rgb(0,0,0)"}},[t._v(t._s(t.matchedtxt))]),t._l(t.nodes,(function(e){return n("g",{staticClass:"func_g",attrs:{"node-index":e.index,"data-search":e.search,"data-funcname":e.func},on:{mouseover:function(n){return t.s(e.name+" "+e.samples)},mouseout:function(e){return t.c()},click:function(e){return e.stopPropagation(),t.zoom(e)}}},[n("title",[t._v(t._s(e.name)+" "+t._s(e.samples))]),n("rect",{attrs:{"node-index":e.index,x:e.rect_x,"data-x":e.rect_x,y:e.rect_y,width:e.rect_w,"data-width":e.rect_w,height:e.rect_h,"data-height":e.rect_h,fill:e.rect_fill,rx:"2",ry:"2"}}),n("text",{attrs:{"data-x":e.text_x,x:e.text_x,y:e.text_y,"font-size":t.data.fontsize,"font-family":t.data.fonttype,fill:"rgb(0,0,0)"}},[t._v(t._s(e.text))])])}))],2)},i=[],o=(n("386d"),n("7f7f"),n("456d"),n("ac6a"),n("9ec8"),n("55dd"),n("6c7b"),n("4917"),n("3b2b"),n("28a5"),n("a481"),0);function s(t,e,n){for(var a=t.childNodes,r=0;r<a.length;r++)if(a[r].tagName==e)return void 0!=n?a[r].attributes[n].value:a[r]}function c(t,e){void 0!=t.attributes["_orig_"+e]&&(t.attributes[e].value=t.attributes["_orig_"+e].value,t.removeAttribute("_orig_"+e))}function l(t,e,n){void 0==t.attributes["_orig_"+e]&&void 0!=t.attributes[e]&&(void 0==n&&(n=t.attributes[e].value),t.setAttribute("_orig_"+e,n))}function u(t){var e=s(t,"title").firstChild.nodeValue;return e}function f(t){var e=u(t);return null!=e&&(e=e.replace(/ .*/,"")),e}function d(t,e,n){if(void 0!=t.attributes&&(void 0!=t.attributes["x"]&&(l(t,"x"),t.attributes["x"].value=(parseFloat(t.attributes["x"].value)-e-10)*n+10,"text"==t.tagName&&(t.attributes["x"].value=s(t.parentNode,"rect","x")+3)),void 0!=t.attributes["width"])){l(t,"width");t.attributes["node-index"].value;var a=t.attributes["width"].value;t.attributes["width"].value=parseFloat(a)*n,t.attributes["width"].value=t.attributes["width"].value}if(void 0!=t.childNodes)for(var r=0,i=t.childNodes;r<i.length;r++)d(i[r],e-10,n)}function h(t,e){if(t.attributes&&(void 0!=t.attributes["x"]&&(l(t,"x"),t.attributes["x"].value=10),void 0!=t.attributes["width"]&&(l(t,"width"),t.attributes["width"].value=parseFloat(e.width.baseVal.value)-20)),void 0!=t.childNodes)for(var n=0,a=t.childNodes;n<a.length;n++)h(a[n],e)}function p(t){var e=s(t,"rect"),n=s(t,"text"),a=parseFloat(e.attributes["width"].value)-3,r=s(t,"title").textContent.split(" (")[0];if(n.attributes["x"].value=parseFloat(e.attributes["x"].value)+3,a<14.16)n.textContent="";else if(n.textContent=r,!(/^ *$/.test(r)||n.getSubStringLength(0,r.length)<a)){for(var i=r.length-2;i>0;i--)if(n.getSubStringLength(0,i+2)<=a)return void(n.textContent=r.substring(0,i)+"..");n.textContent=""}}function v(t){if(void 0!=t.attributes&&(c(t,"x"),c(t,"width")),void 0!=t.childNodes)for(var e=0,n=t.childNodes;e<n.length;e++)v(n[e])}function g(t,e,n){for(var a=new RegExp(t),i=document.getElementsByTagName("g"),c=new Object,u=0,d=0;d<i.length;d++){var h=i[d];if("func_g"==h.attributes["class"].value){var p=f(h),v=s(h,"rect");if(null==v&&(v=s(h,"a"))&&(v=s(r,"rect")),null!=p&&null!=v){var g=parseFloat(v.attributes["width"].value);if(g>u&&(u=g),p.match(a)){var m=parseFloat(v.attributes["x"].value);l(v,"fill"),v.attributes["fill"].value="rgb(230,0,230)",(void 0==c[m]||g>c[m])&&(c[m]=g),o=1}}}}if(!o)return e.style["opacity"]="1.0",void(e.firstChild.nodeValue="Matched: none");n.style["opacity"]="1.0",n.firstChild.nodeValue="Reset Search";var b=0,x=-1,w=0,y=Array();for(var _ in c)c.hasOwnProperty(_)&&y.push(_);for(var S in y.sort((function(t,e){return t-e})),y){var k=parseFloat(y[S]),z=c[y[S]];k>=x+w&&(b+=z,x=k,w=z)}e.style["opacity"]="1.0";var N=100*b/u;N=100==N?"100":N.toFixed(1),e.firstChild.nodeValue="Matched: "+N+"%"}function m(){for(var t=document.getElementsByTagName("rect"),e=0;e<t.length;e++)c(t[e],"fill")}var b=function(){function t(t){return t.split("").reverse().join("")}function e(t){var e,n=0,a=1,r=1,i=10;t=t.replace(/.(.*?)`/,"");for(var o=t.split(""),s=0;s<o.length;s++)if(e=o[s].charCodeAt(0)%i,n+=e/(i++-1)*a,r+=a,a*=.7,i>12)break;return 1-n/r}function n(n,a,r){var i,o,s,c,l,u;if(!n)return"rgb(0, 0, 0)";switch(a?(i=e(r),o=s=e(t(r))):(i=Math.random()+1,o=Math.random()+1,s=Math.random()+1),n){case"hot":return c=205+Math.round(50*s),l=0+Math.round(230*i),u=0+Math.round(55*o),"rgb(".concat(c,", ").concat(l,", ").concat(u,")");case"mem":return c=0,l=190+Math.round(50*o),u=0+Math.round(210*i),"rgb(".concat(c,", ").concat(l,", ").concat(u,")");case"io":return c=80+Math.round(60*i),l=c,u=190+Math.round(55*o),"rgb(".concat(c,", ").concat(l,", ").concat(u,")");default:throw new Error("Unknown type "+n)}}function a(t,e,a,r){return t[r]||(t[r]=n(e,a,r)),t[r]}return a}(),x=function(){function t(t){return Math.round(10*t)/10}function e(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function n(n,a){var r=n.each,i=n.time,o=a.timemax,s=4*a.fontsize,c=2*a.fontsize+10,l=10,u=.82*a.imagewidth,f=.92*a.imagewidth,d=0,h=a.frameheight,p={};o<i&&o/i>.02&&(console.error("Specified timemax %d is less than actual total %d, so it will be ignored",o,i),o=1/0),o=Math.min(i,o);var v=(a.imagewidth-2*l)/o,g=a.minwidth/v;function m(t){function e(t){var e=n.nodes[t];if("number"!==typeof e.stime)throw new Error("Missing start for "+t);e.etime-e.stime<g?e.narrow=!0:(e.narrow=!1,d=Math.max(e.depth,d))}Object.keys(t).forEach(e)}function x(n,i){var s=n.func,u=n.depth,f=n.etime,d=n.stime,g=a.factor,m=a.countname,x=!s.length&&0===u;x&&(f=o);var y,S,k,z,N,F=Math.round(10*(f-d*g))/10,I=F*r,T=F.toLocaleString();x?(z="all",N="(".concat(T," ").concat(m," ").concat(w.formatTime(I),", 100%)")):(y=Math.round(100*F/(o*g)*10)/10,S=y.toLocaleString(),k=e(s),z=k,N="(".concat(T," ").concat(m," ").concat(w.formatTime(I),"), ").concat(S,"%)"));var E,P=t(l+d*v),A=t(l+f*v),C=t(_-c-(u+1)*h+1),O=t(_-c-u*h),M=(A-P)/(a.fontsize*a.fontwidth),D=!1;M>=3&&(D=!0,E=s.slice(0,M),M<s.length&&(E=E.slice(0,M-2)+".."),E=e(E));var $=A-P,j=O-C;return{name:z,index:i,search:z.toLowerCase(),samples:N,rect_x:P,rect_y:C,rect_w:$,rect_h:j,rect_fill:b(p,a.colors,a.hash,s),text:E,text_x:P+(D?3:0),text_y:3+(C+O)/2,narrow:n.narrow,func:e(s)}}function y(t){for(var e=Object.keys(t),n=new Array(e.length),a=0;a<e.length;a++)n[a]=x(t[e[a]],a);return n}m(n.nodes);var _=d*h+s+c,S=Object.assign({},a,{imageheight:_,xpad:l,xpad2:u,xpad3:f,titleX:a.imagewidth/2,detailsY:_-h/2,viewbox:"0 0 ".concat(a.imagewidth," ").concat(_)});return S.nodes=y(n.nodes),S}return n}(),w=function(){function t(t){t=!isNaN(t)&&t||0,t/=1e3;var e="";return e=t<1e3?"".concat(t.toFixed(2)," ms"):t<6e4?"".concat((t/1e3).toFixed(2)," s"):t<36e5?"".concat((t/6e4).toFixed(2)," min"):t<216e6?"".concat((t/36e5).toFixed(2)," h"):"".concat(t.toFixed(2)," ms"),e}return{formatTime:t}}();function y(t,e){function n(t){t.class=t.narrow?"hidden":""}function a(t){return!t.narrow}e.removenarrows?t.nodes=t.nodes.filter(a):t.nodes.forEach(n)}function _(t,e,n){if(n.push({func:t.name,depth:e.depth,stime:e.stime,etime:e.stime+t.value}),!t.children)return n;t.children.sort((function(t,e){return t.rettime<e.rettime}));for(var a=0,r=0;r<t.children.length;r++){var i=t.children[r];_(i,{stime:e.stime+a,depth:e.depth+1},n),a+=i.value}return n}function S(t,e){var n=t.time>t.nodes.value?t.time:t.nodes.value;t.nodes.rettime=n-t.nodes.value;var a={name:"root",value:n,rettime:0,children:[{name:"idle",value:n-t.nodes.value,rettime:0},t.nodes]};return[n,_(a,{stime:0,depth:0},e)]}function k(){var t=this.$refs.svg.clientWidth;this.flamegraphData.fconfig.imagewidth=t,this.flamegraphData.fconfig.timemax=1/0;var e=S(this.flamegraphData.data,[]);this.flamegraphData.parsed={each:1,time:e[0],nodes:e[1]};var n=x(this.flamegraphData.parsed,this.flamegraphData.fconfig);y(n,this.flamegraphData.fconfig),this.data=n}function z(t){this.show="Function: "+t}function N(){this.show="SWT"}function F(t){var e=t.currentTarget,n=e.attributes["node-index"].value;n,this.need_unzoom[n]&&I.call(this);var a=this.$refs.svg,r=s(e,"rect").attributes,i=parseFloat(r["width"].value),o=parseFloat(r["x"].value),c=parseFloat(o+i),l=parseFloat(r["y"].value),u=(a.width.baseVal.value-20)/parseFloat(r["width"].value),f=1e-4,v=this.$refs.unzoom;v.style["opacity"]="1.0";for(var g,m=document.getElementsByTagName("g"),b=0;b<m.length;b++){var x=m[b],w=(x.attributes["node-index"].value,s(x,"rect").attributes),y=parseFloat(w["x"].value),_=parseFloat(w["width"].value);g=parseFloat(w["y"].value)>l,g?y<=o&&y+_+f>=c?(x.style["opacity"]="0.5",h(x,a),this.need_unzoom[x.attributes["node-index"].value]=!0,p(x)):x.style["display"]="none":y<o||y+f>=c?x.style["display"]="none":(d(x,o,u),this.need_unzoom[x.attributes["node-index"].value]=!1,p(x))}}function I(){var t=this.$refs.unzoom;t.style["opacity"]="0.0";for(var e=document.getElementsByTagName("g"),n=0;n<e.length;n++)e[n].style["display"]="block",e[n].style["opacity"]="1",v(e[n]),p(e[n])}function T(t){this.$refs.search.style["opacity"]="1.0"}function E(t){var e=this.$refs.search;e.style["opacity"]=o?"1.0":"0.1"}function P(){var t=this.$refs.search,e=this.$refs.matched;if(o)m(),o=0,t.style["opacity"]="0.1",t.firstChild.nodeValue="Search",e.style["opacity"]="0.0",e.firstChild.nodeValue="";else{var n=prompt("请输入需要查询的函数名: (允许输入正则表达式，例如: ^ext4_)","");null!=n&&g(n,e,t)}}function A(){this.showBigPic?this.$emit("hidePic"):this.$emit("changPic")}function C(){return this.data.nodes||[]}function O(){var t=this.$refs.svg.clientWidth;this.flamegraphData.fconfig.imagewidth=t,this.flamegraphData.fconfig.timemax=1/0;var e=S(this.flamegraphData.data,[]);this.flamegraphData.parsed={each:1,time:e[0],nodes:e[1]};var n=x(this.flamegraphData.parsed,this.flamegraphData.fconfig);y(n,this.flamegraphData.fconfig),this.data=n,I.call(this)}var M={mounted:k,methods:{s:z,c:N,zoom:F,unzoom:I,searchover:T,searchout:E,search_prompt:P,set_parent_inf:A},computed:{nodes:C},watch:{showBigPic:O}},D={data:function(){return{data:{},matchedtxt:"",show:"SWT",need_unzoom:{}}},props:["flamegraphData","showBigPic"],mounted:function(){M.mounted.call(this)},methods:{s:function(t){M.methods.s.call(this,t)},c:function(){M.methods.c.call(this)},zoom:function(t){M.methods.zoom.call(this,t)},unzoom:function(){M.methods.unzoom.call(this)},searchover:function(){M.methods.searchover.call(this)},searchout:function(){M.methods.searchout.call(this)},search_prompt:function(){M.methods.search_prompt.call(this)},set_parent_inf:function(){M.methods.set_parent_inf.call(this)},zoomover:function(){this.$refs.enlarge.style["opacity"]="1.0"},zoomout:function(){this.$refs.enlarge.style["opacity"]="0.1"}},computed:{nodes:function(){return M.computed.nodes.call(this)},enlarge:function(){return this.showBigPic?"ZoomOut":"ZoomIn"}},watch:{showBigPic:function(){return M.watch.showBigPic.call(this)},flamegraphData:function(){return M.watch.showBigPic.call(this)}}},$=D,j=n("2877"),R=Object(j["a"])($,a,i,!1,null,null,null);e["a"]=R.exports},"83a1":function(t,e){t.exports=Object.is||function(t,e){return t===e?0!==t||1/t===1/e:t!=t&&e!=e}},"9ec8":function(t,e,n){"use strict";n("386b")("fontsize",(function(t){return function(e){return t(this,"font","size",e)}}))},a481:function(t,e,n){"use strict";var a=n("cb7c"),r=n("4bf8"),i=n("9def"),o=n("4588"),s=n("0390"),c=n("5f1b"),l=Math.max,u=Math.min,f=Math.floor,d=/\$([$&`']|\d\d?|<[^>]*>)/g,h=/\$([$&`']|\d\d?)/g,p=function(t){return void 0===t?t:String(t)};n("214f")("replace",2,(function(t,e,n,v){return[function(a,r){var i=t(this),o=void 0==a?void 0:a[e];return void 0!==o?o.call(a,i,r):n.call(String(i),a,r)},function(t,e){var r=v(n,t,this,e);if(r.done)return r.value;var f=a(t),d=String(this),h="function"===typeof e;h||(e=String(e));var m=f.global;if(m){var b=f.unicode;f.lastIndex=0}var x=[];while(1){var w=c(f,d);if(null===w)break;if(x.push(w),!m)break;var y=String(w[0]);""===y&&(f.lastIndex=s(d,i(f.lastIndex),b))}for(var _="",S=0,k=0;k<x.length;k++){w=x[k];for(var z=String(w[0]),N=l(u(o(w.index),d.length),0),F=[],I=1;I<w.length;I++)F.push(p(w[I]));var T=w.groups;if(h){var E=[z].concat(F,N,d);void 0!==T&&E.push(T);var P=String(e.apply(void 0,E))}else P=g(z,d,N,F,T,e);N>=S&&(_+=d.slice(S,N)+P,S=N+z.length)}return _+d.slice(S)}];function g(t,e,a,i,o,s){var c=a+t.length,l=i.length,u=h;return void 0!==o&&(o=r(o),u=d),n.call(s,u,(function(n,r){var s;switch(r.charAt(0)){case"$":return"$";case"&":return t;case"`":return e.slice(0,a);case"'":return e.slice(c);case"<":s=o[r.slice(1,-1)];break;default:var u=+r;if(0===u)return n;if(u>l){var d=f(u/10);return 0===d?n:d<=l?void 0===i[d-1]?r.charAt(1):i[d-1]+r.charAt(1):n}s=i[u-1]}return void 0===s?"":s}))}}))},aa77:function(t,e,n){var a=n("5ca1"),r=n("be13"),i=n("79e5"),o=n("fdef"),s="["+o+"]",c="​",l=RegExp("^"+s+s+"*"),u=RegExp(s+s+"*$"),f=function(t,e,n){var r={},s=i((function(){return!!o[t]()||c[t]()!=c})),l=r[t]=s?e(d):o[t];n&&(r[n]=l),a(a.P+a.F*s,"String",r)},d=f.trim=function(t,e){return t=String(r(t)),1&e&&(t=t.replace(l,"")),2&e&&(t=t.replace(u,"")),t};t.exports=f},c5f6:function(t,e,n){"use strict";var a=n("7726"),r=n("69a8"),i=n("2d95"),o=n("5dbc"),s=n("6a99"),c=n("79e5"),l=n("9093").f,u=n("11e9").f,f=n("86cc").f,d=n("aa77").trim,h="Number",p=a[h],v=p,g=p.prototype,m=i(n("2aeb")(g))==h,b="trim"in String.prototype,x=function(t){var e=s(t,!1);if("string"==typeof e&&e.length>2){e=b?e.trim():d(e,3);var n,a,r,i=e.charCodeAt(0);if(43===i||45===i){if(n=e.charCodeAt(2),88===n||120===n)return NaN}else if(48===i){switch(e.charCodeAt(1)){case 66:case 98:a=2,r=49;break;case 79:case 111:a=8,r=55;break;default:return+e}for(var o,c=e.slice(2),l=0,u=c.length;l<u;l++)if(o=c.charCodeAt(l),o<48||o>r)return NaN;return parseInt(c,a)}}return+e};if(!p(" 0o1")||!p("0b1")||p("+0x1")){p=function(t){var e=arguments.length<1?0:t,n=this;return n instanceof p&&(m?c((function(){g.valueOf.call(n)})):i(n)!=h)?o(new v(x(e)),n,p):x(e)};for(var w,y=n("9e1e")?l(v):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),_=0;y.length>_;_++)r(v,w=y[_])&&!r(p,w)&&f(p,w,u(v,w));p.prototype=g,g.constructor=p,n("2aba")(a,h,p)}},fdef:function(t,e){t.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"}}]);
//# sourceMappingURL=CpuProfiler.e3ad9284.js.map